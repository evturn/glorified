"use strict";var RB={};RB.User=Backbone.Model.extend({url:"/users",idAttribute:"_id"}),RB.Note=Backbone.Model.extend({idAttribute:"_id"}),RB.List=Backbone.Model.extend({idAttribute:"_id"}),RB.Lists=Backbone.Collection.extend({model:RB.List,url:"/notes"}),RB.Notes=Backbone.Collection.extend({model:RB.Note,url:"/notes",merge:!0}),_.extend(Backbone.View.prototype,{start:function(){app.renderForms(),app.appendIcons(),app.user=new RB.User,app.listsCollection=null,app.notesCollection=null,app.activeListId=null,app.activeListLength=null,app.mobileClient=null,app.tabletClient=null,app.desktopClient=null,app.windowWidth=$(window).width(),app.$lists=$(".lists"),app.$notes=$(".notes"),app.$listInput=$(".list-input"),app.$noteInput=$(".note-input"),app.$notesContainer=$(".notes-container"),app.$listsContainer=$(".lists-container"),app.listeners.init(),app.user.fetch({success:function(a,o){return null===app.user&&(app.user=a),null===app.listsCollection&&(app.listsCollection=new RB.Lists(a.attributes.lists),app.setLists(),app.setProgressBars()),app.listsCollection},error:function(a){console.log(a)}})},get:function(){var a=arguments.length<=0||void 0===arguments[0]?{render:!0,_id:!1}:arguments[0];app.user.fetch({success:function(o,e){if(app.listsCollection.stopListening(),app.listsCollection=new RB.Lists(o.attributes.lists),a._id)app.activeListId=a._id,app.setActiveListId(app.activeListId),app.setLists();else if(a.render===!1)return app.setLists(),app.setProgressBars(),!1;app.setNotes(app.activeListId),app.setProgressBars()},error:function(a){console.log(a)}})},post:function(a){$.ajax({url:"/notes/",method:"POST",data:a,success:function(a,o){app.$noteInput.val("").focus(),app.validate(),app.notify(o),app.get({_id:a._id,render:!0})},error:function(a){console.log(a)}})},put:function(a,o,e){var i=a.get("_id");a.save(o,{url:"/notes/"+i,success:function(a,o){app.notify("Updated"),app.get()},error:function(a){console.log("error ",a)}})},destroy:function(a){var o=a.get("_id"),e=app.getActiveListId();a.set("listId",e),null!==o&&a.destroy({url:"/notes/"+o+"?listId="+e,success:function(a,o){console.log("success ",a),app.notify("Removed"),app.get()},error:function(a){console.log("error ",a)}})},list:{destroy:function(a,o){null!==o&&a.destroy({url:"/lists/"+o,success:function(a,e){console.log("success ",a),app.removeListItemById(o),app.notify("Removed"),app.get({render:!1}),app.createList()},error:function(a){console.log("error ",a)}})}}}),_.extend(Backbone.View.prototype,{getActiveListId:function(){var a=app.activeListId;return a},setActiveListId:function(a){return app.$notesContainer.attr("data-list",a),app.activeListId=a,this},getListContainerById:function(a){var o=$(".list-item .inner-container");return o.find("[data-id='"+a+"']")},removeListItemById:function(a){var o=app.getListContainerById(a);o.parent().remove()},setListValue:function(a){app.$listInput.val(a)},resetActiveList:function(a){var o=$(".list-item"),e=$("div").find("[data-id='"+a+"']");return o.removeClass("active"),e.addClass("active"),e},renderForms:function(){var a=$(".inputs-container");return a.html(this.inputTemplate()),autosize($("textarea")),this},renderActiveProgressBar:function(a){var o=app.notesCollection,e=$(".active-progress"),i=a,n=o.length,t=o.where({done:!1}).length,c=n-t,s=t/n*100+"%",f=parseInt(s).toFixed(0)+"%",r=c/n*100+"%",l=parseInt(r).toFixed(0)+"%",p={name:name,_id:i,length:n,notDone:t,notDonePct:s,notDoneText:f,done:c,donePct:r,doneText:l};0===e.children().length&&e.html(app.progressBarTemplate(p));var d=$("#list-progress").find("[data-done='"+p._id+"']"),u=$("#list-progress").find("[data-notDone='"+p._id+"']"),m=$(".not-done-text"),h=$(".done-text");d.css({width:p.donePct}),u.css({width:p.notDonePct}),h.html(p.doneText),m.html(p.notDoneText),app.activeListId&&app.activeListId===p._id&&app.hasLengthChanged(p)},setProgressBars:function(){var a=[],o=0;app.listsCollection.each(function(e){var i=e.id,n=e.attributes.name,t=new RB.Notes(e.attributes.notes),c=t.length,s=t.where({done:!1}).length,f=c-s,r=s/c*100+"%",l=f/c*100+"%",p={name:n,_id:i,length:c,notDone:s,notDonePct:r,done:f,donePct:l};a.push(p),t.stopListening(),o++}),a.forEach(function(a){var o=$("div").find("[data-done='"+a._id+"']"),e=$("div").find("[data-notDone='"+a._id+"']");o.css({width:a.donePct}),e.css({width:a.notDonePct}),app.activeListId&&app.activeListId===a._id&&app.hasLengthChanged(a)})},tojquery:function(a){switch(typeof a){case"object":if(a instanceof jQuery)return a;break;case"string":return $("."===a.charAt(0)?a:document.getElementsByClassName(a))}},convertDate:function(a){var o=new Date(a),e=["Sun","Mon","Tue","Wed","Thur","Fri","Sat"],i=(o.getFullYear(),o.getMonth()),n=(""+(i+1)).slice(-2),t=o.getDate(),c=o.getHours(),s=o.getMinutes(),f=s>10?s:"0"+s,r=c>=12?"pm":"am",l=c>12?c-12:c,p=0===l?12:l,d=n+"/"+t+" "+p+":"+f+r+" "+e[o.getDay()];return d},appendIconSelect:function(a){return $(".icon-select").append(app.iconSelectTemplate(a)),this},appendIcons:function(){app.icons.forEach(function(a){app.appendIconSelect(a)})},icons:[{icon:"fa-glass"},{icon:"fa-music"},{icon:"fa-search"},{icon:"fa-envelope-o"},{icon:"fa-heart"},{icon:"fa-star"},{icon:"fa-star-o"},{icon:"fa-user"},{icon:"fa-film"},{icon:"fa-th-large"},{icon:"fa-th"},{icon:"fa-th-list"},{icon:"fa-check"},{icon:"fa-remove"},{icon:"fa-close"},{icon:"fa-times"},{icon:"fa-search-plus"},{icon:"fa-search-minus"},{icon:"fa-power-off"},{icon:"fa-signal"},{icon:"fa-gear"},{icon:"fa-cog"},{icon:"fa-trash-o"},{icon:"fa-home"},{icon:"fa-file-o"},{icon:"fa-clock-o"},{icon:"fa-road"},{icon:"fa-download"},{icon:"fa-arrow-circle-o-down"},{icon:"fa-arrow-circle-o-up"},{icon:"fa-inbox"},{icon:"fa-play-circle-o"},{icon:"fa-rotate-right"},{icon:"fa-repeat"},{icon:"fa-refresh"},{icon:"fa-list-alt"},{icon:"fa-lock"},{icon:"fa-flag"},{icon:"fa-headphones"},{icon:"fa-volume-off"},{icon:"fa-volume-down"},{icon:"fa-volume-up"},{icon:"fa-qrcode"},{icon:"fa-barcode"},{icon:"fa-tag"},{icon:"fa-tags"},{icon:"fa-book"},{icon:"fa-bookmark"},{icon:"fa-print"},{icon:"fa-camera"},{icon:"fa-font"},{icon:"fa-bold"},{icon:"fa-italic"},{icon:"fa-text-height"},{icon:"fa-text-width"},{icon:"fa-align-left"},{icon:"fa-align-center"},{icon:"fa-align-right"},{icon:"fa-align-justify"},{icon:"fa-list"},{icon:"fa-dedent"},{icon:"fa-outdent"},{icon:"fa-indent"},{icon:"fa-video-camera"},{icon:"fa-photo"},{icon:"fa-image"},{icon:"fa-picture-o"},{icon:"fa-pencil"},{icon:"fa-map-marker"},{icon:"fa-adjust"},{icon:"fa-tint"},{icon:"fa-edit"},{icon:"fa-pencil-square-o"},{icon:"fa-share-square-o"},{icon:"fa-check-square-o"},{icon:"fa-arrows"},{icon:"fa-step-backward"},{icon:"fa-fast-backward"},{icon:"fa-backward"},{icon:"fa-play"},{icon:"fa-pause"},{icon:"fa-stop"},{icon:"fa-forward"},{icon:"fa-fast-forward"},{icon:"fa-step-forward"},{icon:"fa-eject"},{icon:"fa-chevron-left"},{icon:"fa-chevron-right"},{icon:"fa-plus-circle"},{icon:"fa-minus-circle"},{icon:"fa-times-circle"},{icon:"fa-check-circle"},{icon:"fa-question-circle"},{icon:"fa-info-circle"},{icon:"fa-crosshairs"},{icon:"fa-times-circle-o"},{icon:"fa-check-circle-o"},{icon:"fa-ban"},{icon:"fa-arrow-left"},{icon:"fa-arrow-right"},{icon:"fa-arrow-up"},{icon:"fa-arrow-down"},{icon:"fa-mail-forward"},{icon:"fa-share"},{icon:"fa-expand"},{icon:"fa-compress"},{icon:"fa-plus"},{icon:"fa-minus"},{icon:"fa-asterisk"},{icon:"fa-exclamation-circle"},{icon:"fa-gift"},{icon:"fa-leaf"},{icon:"fa-fire"},{icon:"fa-eye"},{icon:"fa-eye-slash"},{icon:"fa-warning"},{icon:"fa-exclamation-triangle"},{icon:"fa-plane"},{icon:"fa-calendar"},{icon:"fa-random"},{icon:"fa-comment"},{icon:"fa-magnet"},{icon:"fa-chevron-up"},{icon:"fa-chevron-down"},{icon:"fa-retweet"},{icon:"fa-shopping-cart"},{icon:"fa-folder"},{icon:"fa-folder-open"},{icon:"fa-arrows-v"},{icon:"fa-arrows-h"},{icon:"fa-bar-chart-o"},{icon:"fa-bar-chart"},{icon:"fa-twitter-square"},{icon:"fa-facebook-square"},{icon:"fa-camera-retro"},{icon:"fa-key"},{icon:"fa-gears"},{icon:"fa-cogs"},{icon:"fa-comments"},{icon:"fa-thumbs-o-up"},{icon:"fa-thumbs-o-down"},{icon:"fa-star-half"},{icon:"fa-heart-o"},{icon:"fa-sign-out"},{icon:"fa-linkedin-square"},{icon:"fa-thumb-tack"},{icon:"fa-external-link"},{icon:"fa-sign-in"},{icon:"fa-trophy"},{icon:"fa-github-square"},{icon:"fa-upload"},{icon:"fa-lemon-o"},{icon:"fa-phone"},{icon:"fa-square-o"},{icon:"fa-bookmark-o"},{icon:"fa-phone-square"},{icon:"fa-twitter"},{icon:"fa-facebook-f"},{icon:"fa-facebook"},{icon:"fa-github"},{icon:"fa-unlock"},{icon:"fa-credit-card"},{icon:"fa-rss"},{icon:"fa-hdd-o"},{icon:"fa-bullhorn"},{icon:"fa-bell"},{icon:"fa-certificate"},{icon:"fa-hand-o-right"},{icon:"fa-hand-o-left"},{icon:"fa-hand-o-up"},{icon:"fa-hand-o-down"},{icon:"fa-arrow-circle-left"},{icon:"fa-arrow-circle-right"},{icon:"fa-arrow-circle-up"},{icon:"fa-arrow-circle-down"},{icon:"fa-globe"},{icon:"fa-wrench"},{icon:"fa-tasks"},{icon:"fa-filter"},{icon:"fa-briefcase"},{icon:"fa-arrows-alt"},{icon:"fa-group"},{icon:"fa-users"},{icon:"fa-chain"},{icon:"fa-link"},{icon:"fa-cloud"},{icon:"fa-flask"},{icon:"fa-cut"},{icon:"fa-scissors"},{icon:"fa-copy"},{icon:"fa-files-o"},{icon:"fa-paperclip"},{icon:"fa-save"},{icon:"fa-floppy-o"},{icon:"fa-square"},{icon:"fa-navicon"},{icon:"fa-reorder"},{icon:"fa-bars"},{icon:"fa-list-ul"},{icon:"fa-list-ol"},{icon:"fa-strikethrough"},{icon:"fa-underline"},{icon:"fa-table"},{icon:"fa-magic"},{icon:"fa-truck"},{icon:"fa-pinterest"},{icon:"fa-pinterest-square"},{icon:"fa-google-plus-square"},{icon:"fa-google-plus"},{icon:"fa-money"},{icon:"fa-caret-down"},{icon:"fa-caret-up"},{icon:"fa-caret-left"},{icon:"fa-caret-right"},{icon:"fa-columns"},{icon:"fa-unsorted"},{icon:"fa-sort"},{icon:"fa-sort-down"},{icon:"fa-sort-desc"},{icon:"fa-sort-up"},{icon:"fa-sort-asc"},{icon:"fa-envelope"},{icon:"fa-linkedin"},{icon:"fa-rotate-left"},{icon:"fa-undo"},{icon:"fa-legal"},{icon:"fa-gavel"},{icon:"fa-dashboard"},{icon:"fa-tachometer"},{icon:"fa-comment-o"},{icon:"fa-comments-o"},{icon:"fa-flash"},{icon:"fa-bolt"},{icon:"fa-sitemap"},{icon:"fa-umbrella"},{icon:"fa-paste"},{icon:"fa-clipboard"},{icon:"fa-lightbulb-o"},{icon:"fa-exchange"},{icon:"fa-cloud-download"},{icon:"fa-cloud-upload"},{icon:"fa-user-md"},{icon:"fa-stethoscope"},{icon:"fa-suitcase"},{icon:"fa-bell-o"},{icon:"fa-coffee"},{icon:"fa-cutlery"},{icon:"fa-file-text-o"},{icon:"fa-building-o"},{icon:"fa-hospital-o"},{icon:"fa-ambulance"},{icon:"fa-medkit"},{icon:"fa-fighter-jet"},{icon:"fa-beer"},{icon:"fa-h-square"},{icon:"fa-plus-square"},{icon:"fa-angle-double-left"},{icon:"fa-angle-double-right"},{icon:"fa-angle-double-up"},{icon:"fa-angle-double-down"},{icon:"fa-angle-left"},{icon:"fa-angle-right"},{icon:"fa-angle-up"},{icon:"fa-angle-down"},{icon:"fa-desktop"},{icon:"fa-laptop"},{icon:"fa-tablet"},{icon:"fa-mobile-phone"},{icon:"fa-mobile"},{icon:"fa-circle-o"},{icon:"fa-quote-left"},{icon:"fa-quote-right"},{icon:"fa-spinner"},{icon:"fa-circle"},{icon:"fa-mail-reply"},{icon:"fa-reply"},{icon:"fa-github-alt"},{icon:"fa-folder-o"},{icon:"fa-folder-open-o"},{icon:"fa-smile-o"},{icon:"fa-frown-o"},{icon:"fa-meh-o"},{icon:"fa-gamepad"},{icon:"fa-keyboard-o"},{icon:"fa-flag-o"},{icon:"fa-flag-checkered"},{icon:"fa-terminal"},{icon:"fa-code"},{icon:"fa-mail-reply-all"},{icon:"fa-reply-all"},{icon:"fa-star-half-empty"},{icon:"fa-star-half-full"},{icon:"fa-star-half-o"},{icon:"fa-location-arrow"},{icon:"fa-crop"},{icon:"fa-code-fork"},{icon:"fa-unlink"},{icon:"fa-chain-broken"},{icon:"fa-question"},{icon:"fa-info"},{icon:"fa-exclamation"},{icon:"fa-superscript"},{icon:"fa-subscript"},{icon:"fa-eraser"},{icon:"fa-puzzle-piece"},{icon:"fa-microphone"},{icon:"fa-microphone-slash"},{icon:"fa-shield"},{icon:"fa-calendar-o"},{icon:"fa-fire-extinguisher"},{icon:"fa-rocket"},{icon:"fa-maxcdn"},{icon:"fa-chevron-circle-left"},{icon:"fa-chevron-circle-right"},{icon:"fa-chevron-circle-up"},{icon:"fa-chevron-circle-down"},{icon:"fa-html5"},{icon:"fa-css3"},{icon:"fa-anchor"},{icon:"fa-unlock-alt"},{icon:"fa-bullseye"},{icon:"fa-ellipsis-h"},{icon:"fa-ellipsis-v"},{icon:"fa-rss-square"},{icon:"fa-play-circle"},{icon:"fa-ticket"},{icon:"fa-minus-square"},{icon:"fa-minus-square-o"},{icon:"fa-level-up"},{icon:"fa-level-down"},{icon:"fa-check-square"},{icon:"fa-pencil-square"},{icon:"fa-external-link-square"},{icon:"fa-share-square"},{icon:"fa-compass"},{icon:"fa-toggle-down"},{icon:"fa-caret-square-o-down"},{icon:"fa-toggle-up"},{icon:"fa-caret-square-o-up"},{icon:"fa-toggle-right"},{icon:"fa-caret-square-o-right"},{icon:"fa-euro"},{icon:"fa-eur"},{icon:"fa-gbp"},{icon:"fa-dollar"},{icon:"fa-usd"},{icon:"fa-rupee"},{icon:"fa-inr"},{icon:"fa-cny"},{icon:"fa-rmb"},{icon:"fa-yen"},{icon:"fa-jpy"},{icon:"fa-ruble"},{icon:"fa-rouble"},{icon:"fa-rub"},{icon:"fa-won"},{icon:"fa-krw"},{icon:"fa-bitcoin"},{icon:"fa-btc"},{icon:"fa-file"},{icon:"fa-file-text"},{icon:"fa-sort-alpha-asc"},{icon:"fa-sort-alpha-desc"},{icon:"fa-sort-amount-asc"},{icon:"fa-sort-amount-desc"},{icon:"fa-sort-numeric-asc"},{icon:"fa-sort-numeric-desc"},{icon:"fa-thumbs-up"},{icon:"fa-thumbs-down"},{icon:"fa-youtube-square"},{icon:"fa-youtube"},{icon:"fa-xing"},{icon:"fa-xing-square"},{icon:"fa-youtube-play"},{icon:"fa-dropbox"},{icon:"fa-stack-overflow"},{icon:"fa-instagram"},{icon:"fa-flickr"},{icon:"fa-adn"},{icon:"fa-bitbucket"},{icon:"fa-bitbucket-square"},{icon:"fa-tumblr"},{icon:"fa-tumblr-square"},{icon:"fa-long-arrow-down"},{icon:"fa-long-arrow-up"},{icon:"fa-long-arrow-left"},{icon:"fa-long-arrow-right"},{icon:"fa-apple"},{icon:"fa-windows"},{icon:"fa-android"},{icon:"fa-linux"},{icon:"fa-dribbble"},{icon:"fa-skype"},{icon:"fa-foursquare"},{icon:"fa-trello"},{icon:"fa-female"},{icon:"fa-male"},{icon:"fa-gittip"},{icon:"fa-gratipay"},{icon:"fa-sun-o"},{icon:"fa-moon-o"},{icon:"fa-archive"},{icon:"fa-bug"},{icon:"fa-vk"},{icon:"fa-weibo"},{icon:"fa-renren"},{icon:"fa-pagelines"},{icon:"fa-stack-exchange"},{icon:"fa-arrow-circle-o-right"},{icon:"fa-arrow-circle-o-left"},{icon:"fa-toggle-left"},{icon:"fa-caret-square-o-left"},{icon:"fa-dot-circle-o"},{icon:"fa-wheelchair"},{icon:"fa-vimeo-square"},{icon:"fa-turkish-lira"},{icon:"fa-try"},{icon:"fa-plus-square-o"},{icon:"fa-space-shuttle"},{icon:"fa-slack"},{icon:"fa-envelope-square"},{icon:"fa-wordpress"},{icon:"fa-openid"},{icon:"fa-institution"},{icon:"fa-bank"},{icon:"fa-university"},{icon:"fa-mortar-board"},{icon:"fa-graduation-cap"},{icon:"fa-yahoo"},{icon:"fa-google"},{icon:"fa-reddit"},{icon:"fa-reddit-square"},{icon:"fa-stumbleupon-circle"},{icon:"fa-stumbleupon"},{icon:"fa-delicious"},{icon:"fa-digg"},{icon:"fa-pied-piper"},{icon:"fa-pied-piper-alt"},{icon:"fa-drupal"},{icon:"fa-joomla"},{icon:"fa-language"},{icon:"fa-fax"},{icon:"fa-building"},{icon:"fa-child"},{icon:"fa-paw"},{icon:"fa-spoon"},{icon:"fa-cube"},{icon:"fa-cubes"},{icon:"fa-behance"},{icon:"fa-behance-square"},{icon:"fa-steam"},{icon:"fa-steam-square"},{icon:"fa-recycle"},{icon:"fa-automobile"},{icon:"fa-car"},{icon:"fa-cab"},{icon:"fa-taxi"},{icon:"fa-tree"},{icon:"fa-spotify"},{icon:"fa-deviantart"},{icon:"fa-soundcloud"},{icon:"fa-database"},{icon:"fa-file-pdf-o"},{icon:"fa-file-word-o"},{icon:"fa-file-excel-o"},{icon:"fa-file-powerpoint-o"},{icon:"fa-file-photo-o"},{icon:"fa-file-picture-o"},{icon:"fa-file-image-o"},{icon:"fa-file-zip-o"},{icon:"fa-file-archive-o"},{icon:"fa-file-sound-o"},{icon:"fa-file-audio-o"},{icon:"fa-file-movie-o"},{icon:"fa-file-video-o"},{icon:"fa-file-code-o"},{icon:"fa-vine"},{icon:"fa-codepen"},{icon:"fa-jsfiddle"},{icon:"fa-life-bouy"},{icon:"fa-life-buoy"},{icon:"fa-life-saver"},{icon:"fa-support"},{icon:"fa-life-ring"},{icon:"fa-circle-o-notch"},{icon:"fa-ra"},{icon:"fa-rebel"},{icon:"fa-ge"},{icon:"fa-empire"},{icon:"fa-git-square"},{icon:"fa-git"},{icon:"fa-hacker-news"},{icon:"fa-tencent-weibo"},{icon:"fa-qq"},{icon:"fa-wechat"},{icon:"fa-weixin"},{icon:"fa-send"},{icon:"fa-paper-plane"},{icon:"fa-send-o"},{icon:"fa-paper-plane-o"},{icon:"fa-history"},{icon:"fa-genderless"},{icon:"fa-circle-thin"},{icon:"fa-header"},{icon:"fa-paragraph"},{icon:"fa-sliders"},{icon:"fa-share-alt"},{icon:"fa-share-alt-square"},{icon:"fa-bomb"},{icon:"fa-soccer-ball-o"},{icon:"fa-futbol-o"},{icon:"fa-tty"},{icon:"fa-binoculars"},{icon:"fa-plug"},{icon:"fa-slideshare"},{icon:"fa-twitch"},{icon:"fa-yelp"},{icon:"fa-newspaper-o"},{icon:"fa-wifi"},{icon:"fa-calculator"},{icon:"fa-paypal"},{icon:"fa-google-wallet"},{icon:"fa-cc-visa"},{icon:"fa-cc-mastercard"},{icon:"fa-cc-discover"},{icon:"fa-cc-amex"},{icon:"fa-cc-paypal"},{icon:"fa-cc-stripe"},{icon:"fa-bell-slash"},{icon:"fa-bell-slash-o"},{icon:"fa-trash"},{icon:"fa-copyright"},{icon:"fa-at"},{icon:"fa-eyedropper"},{icon:"fa-paint-brush"},{icon:"fa-birthday-cake"},{icon:"fa-area-chart"},{icon:"fa-pie-chart"},{icon:"fa-line-chart"},{icon:"fa-lastfm"},{icon:"fa-lastfm-square"},{icon:"fa-toggle-off"},{icon:"fa-toggle-on"},{icon:"fa-bicycle"},{icon:"fa-bus"},{icon:"fa-ioxhost"},{icon:"fa-angellist"},{icon:"fa-cc"},{icon:"fa-shekel"},{icon:"fa-sheqel"},{icon:"fa-ils"},{icon:"fa-meanpath"},{icon:"fa-buysellads"},{icon:"fa-connectdevelop"},{icon:"fa-dashcube"},{icon:"fa-forumbee"},{icon:"fa-leanpub"},{icon:"fa-sellsy"},{icon:"fa-shirtsinbulk"},{icon:"fa-simplybuilt"},{icon:"fa-skyatlas"},{icon:"fa-cart-plus"},{icon:"fa-cart-arrow-down"},{icon:"fa-diamond"},{icon:"fa-ship"},{icon:"fa-user-secret"},{icon:"fa-motorcycle"},{icon:"fa-street-view"},{icon:"fa-heartbeat"},{icon:"fa-venus"},{icon:"fa-mars"},{icon:"fa-mercury"},{icon:"fa-transgender"},{icon:"fa-transgender-alt"},{icon:"fa-venus-double"},{icon:"fa-mars-double"},{icon:"fa-venus-mars"},{icon:"fa-mars-stroke"},{icon:"fa-mars-stroke-v"},{icon:"fa-mars-stroke-h"},{icon:"fa-neuter"},{icon:"fa-facebook-official"},{icon:"fa-pinterest-p"},{icon:"fa-whatsapp"},{icon:"fa-server"},{icon:"fa-user-plus"},{icon:"fa-user-times"},{icon:"fa-hotel"},{icon:"fa-bed"},{icon:"fa-viacoin"},{icon:"fa-train"},{icon:"fa-subway"},{icon:"fa-medium"}]}),_.extend(Backbone.View.prototype,{mobile:{init:function(){app.setMobile()}},isMobile:function(){var a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);return a},setMobile:function(){var a=$("body");a.addClass("mobile")}}),_.extend(Backbone.View.prototype,{listeners:{init:function(){app.fixPath(),app.readClient(),app.setClient(),app.isMobile(),autosize(document.querySelectorAll("textarea")),$(window).resize(function(){app.windowWidth=$(window).width(),app.setClient()}),$(document).on("click",".lists-container .list-item",function(){var a=$(".list-item");a.removeClass("active"),$(this).addClass("active")}),$(document).on("click",".toggle-list-btn",function(){app.toggleLists()}),$(document).on("click",".active-progress",function(){$(".active-progress").toggleClass("show-details")})}},readClient:function(){app.isMobile()?(app.mobileClient=!0,app.mobile.init()):app.mobileClient=!1,app.windowWidth<800&&app.windowWidth>600?(app.tabletClient=!0,app.desktopClient=!1):app.windoWidth>=800&&(app.tabletClient=!1,app.desktopClient=!0)},setClient:function(){app.windowWidth>600?(app.$notes.removeClass("expanded"),app.$notes.removeClass("collapsed"),app.$lists.removeClass("expanded"),app.$lists.removeClass("collapsed"),app.stopAnimation()):(app.$notes.addClass("expanded"),app.$lists.addClass("collapsed"),app.animateContainers())},toggleLists:function(){arguments.length<=0||void 0===arguments[0]?{reset:!1}:arguments[0];app.$lists.toggleClass("collapsed"),app.$lists.toggleClass("expanded"),app.$notes.toggleClass("expanded"),app.$notes.toggleClass("collapsed"),app.windowWidth<600?app.animateContainers():app.stopAnimation()},animateContainers:function(){app.$lists.hasClass("collapsed")&&app.$notes.hasClass("expanded")?(app.$lists.animate({marginLeft:"-42%"},200),app.$notes.animate({marginRight:"0%"},200)):app.$lists.hasClass("expanded")&&app.$notes.hasClass("collapsed")&&(app.$notes.animate({marginRight:"-45%"},200),app.$lists.animate({marginLeft:"0%"},200))},stopAnimation:function(){app.$notes.animate({marginRight:"0%"},30),app.$lists.animate({marginLeft:"0%"},30)},notify:function(a){var o=$(".kurt-loader .message");o.html(a),o.removeClass("animated fadeOut"),o.addClass("animated fadeIn"),setTimeout(function(){o.removeClass("animated fadeIn"),o.addClass("animated fadeOut")},1e3)},fixPath:function(){if(window.location.hash&&"#_=_"===window.location.hash){var a={top:document.body.scrollTop,left:document.body.scrollLeft};window.location.hash="",document.body.scrollTop=a.top,document.body.scrollLeft=a.left}},animateListTotal:function(a){var o=$("div").find("[data-length='"+a._id+"']");o.removeClass("fadeInUp"),o.text(a.length),o.addClass("fadeOutUp"),setTimeout(function(){o.removeClass("fadeOutUp"),o.addClass("fadeInUp"),o.show()},300)},hasLengthChanged:function(a){return app.activeListLength===a.length?!1:(app.activeListLength=a.length,app.animateListTotal(a),!0)}}),RB.App=Backbone.View.extend({el:".dmc",inputTemplate:_.template($("#input-template").html()),progressBarTemplate:_.template($("#progress-bar-template").html()),iconSelectTemplate:_.template($("#icon-select-template").html()),iconPlaceholderTemplate:_.template($("#icon-placeholder-template").html()),iconTemplate:_.template($("#icon-template").html()),events:{"click .create-list-btn":"createList","click .create-note-btn":"createNote","keyup .note-input":"createOnEnter","keyup .activeInput":"validate"},createNote:function(){var a=app.$noteInput.val(),o=app.$listInput.val(),e="fa fa-terminal",i=!1;if(a.trim()&&""!==o.trim()){var n={body:a,list:o,icon:e,done:i};if(app.listsCollection.length>0)for(var t=0;t<app.listsCollection.length;t++){var c=app.listsCollection.models[t].body;if(n.body===c)return!1}app.post(n)}return this},createList:function(){var a=$(".active-progress"),o=$(".list-icon");app.$noteInput.val(""),app.$listInput.val("").focus(),app.activeListId=null,app.$notesContainer.empty(),o.html(this.iconPlaceholderTemplate()),a.empty(),app.$notesContainer.attr("data-list","")},createOnEnter:function(a){13===a.keyCode&&app.createNote()},validate:function(){var a=app.$noteInput.val(),o=app.$listInput.val(),e=$(".create-note-btn .fa");a.trim()&&""!==o.trim()?e.addClass("ready"):e.removeClass("ready")},setLists:function(){app.$listsContainer.empty(),app.listsCollection.each(function(a){var o=new RB.ListItem({model:a});app.$listsContainer.append(o.render().el)})},setNote:function(a){var o=new RB.NoteItem({model:a});app.$notesContainer.append(o.render().el)},setNotes:function(a){var o=app.listsCollection.get(a),e=app.sortNotes(o.attributes.notes),i=new RB.Notes(e),n=o.attributes.name,t=$(".list-icon"),c=o.attributes.icon?{icon:o.attributes.icon}:{icon:"fa fa-tasks"};app.$notesContainer.empty(),app.$listInput.val(n),t.empty(),t.append(app.iconTemplate(c)),i.each(function(a){var o=new RB.NoteItem({model:a});app.$notesContainer.append(o.render().el)}),null===app.activeListLength&&(app.activeListLength=i.length),app.notesCollection=i,app.resetActiveList(n),app.renderActiveProgressBar(a)},sortNotes:function(a){var o=_.sortBy(a,"done");return o}}),RB.ListItem=Backbone.View.extend({className:"list-item",listTemplate:_.template($("#list-name-template").html()),events:{"click .inner-container":"selected"},initialize:function(){this.render()},render:function(){return this.$el.html(this.listTemplate(this.model.toJSON())),this},selected:function(a){var o=$(a.currentTarget).data("id"),e=$(".active-progress");e.empty(),app.setNotes(o),app.setActiveListId(o)}}),RB.NoteItem=Backbone.View.extend({className:"note-item",itemTemplate:_.template($("#note-item-template").html()),attributes:{},initalize:function(){this.listenTo(this.model,"destroy",this.remove)},events:{"click .edit .fa-trash":"destroyNote","click .edit .fa-check-square":"toggleDone","click .note-text":"positionCursor","blur .note-text":"updateNoteBody","keyup .note-text":"updateNoteOnEnter"},render:function(){if(!this.model.get("timestamp")&&this.model.get("created")){var a=this.model.get("created");this.model.set("timestamp",this.convertDate(a))}else this.model.get("timestamp")||this.model.get("created")||this.model.set("timestamp",this.convertDate(new Date));return this.model.get("done")||this.model.set("done",!1),this.$el.html(this.itemTemplate(this.model.toJSON())),autosize($("textarea")),$("textarea").css({resize:"none"}),this},positionCursor:function(a){var o=$(a.currentTarget),e=o.val().length;return app.isMobile?!1:o.hasClass("busy")?!1:(o.addClass("busy"),void o[0].setSelectionRange(e,e+1))},destroyNote:function(){return 1===app.activeListLength?(app.list.destroy(this.model,app.activeListId),!1):(app.destroy(this.model),void this.remove())},toggleDone:function(){var a=this.model.get("done"),o=this.getActiveListId(),e={done:!a,listId:o};app.put(this.model,e,this)},updateNoteBody:function(a){var o=$(a.currentTarget),e=o.val().trim(),i=this.getActiveListId(),n={body:e,listId:i};o.removeClass("busy"),app.put(this.model,n,this)},updateNoteOnEnter:function(a){var o=$(a.currentTarget);13===a.keyCode&&o.blur()}});var app=new RB.App;app.start();