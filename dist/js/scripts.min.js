var RB={};RB.Note=Backbone.Model.extend({}),RB.Notes=Backbone.Collection.extend({model:RB.Note,url:"/notes"}),RB.List=Backbone.Collection.extend({model:RB.Note,url:"/notes"}),RB.all=function(){var t=new RB.Notes;t.fetch({success:function(t){console.log(t);new RB.App({collection:t})},error:function(t){console.log(t)}})},RB.returnVal=function(t){return t},RB.getLists=function(t){var e=[];return t.each(function(t){var n=t.get("list");-1===e.indexOf(n)&&e.push(n)}),e},RB.setLists=function(t,e,n){for(var i=e,o=$(".lists-container"),s=0;s<i.length;s++){{var l=t.where({list:i[s]}),c=new RB.List(l);new RB.Input}o.append(n({name:i[s],length:c.length}))}},RB.getNotes=function(t){var e=new RB.List(t);return e},RB.setNotes=function(t,e){var n=e.models[0].get("list");$(".active-input.list-input").val(n),$selector=RB.tojquery(t),$selector.empty(),e.each(function(t){var e=new RB.NoteItem({model:t});$selector.append(e.render().el)})},RB.notify=function(t){var e=$(".kurt-loader"),n=$(".notification"),i='<i class="fa fa-asterisk"></i>',o='<p class="notification thin-lg animated fadeIn">'+i+" "+t+"</p>";e.html(o),setTimeout(function(){n.removeClass("fadeIn"),n.addClass("fadeOut")},1200)},RB.fixPath=function(){if(window.location.hash&&"#_=_"===window.location.hash){var t={top:document.body.scrollTop,left:document.body.scrollLeft};window.location.hash="",document.body.scrollTop=t.top,document.body.scrollLeft=t.left}},RB.tojquery=function(t){switch(typeof t){case"object":if(t instanceof jQuery)return t;break;case"string":return $("."===t.charAt(0)?t:document.getElementsByClassName(t))}},RB.e={init:function(){RB.e.setActiveList(),RB.e.collapseLists(),RB.e.expandLists()},setActiveList:function(){$(document).on("click",".lists-container .list-item",function(){$(".list-item").removeClass("active"),$(this).addClass("active")})},collapseLists:function(){$(document).on("click",".toggle-list-btn.close-list",function(){var t=$(".lists-container"),e=$(".toggle-list-btn.open-list"),n=$(".toggle-list-btn.close-list");n.addClass("hidden"),e.removeClass("hidden"),t.slideToggle("fast")})},expandLists:function(){$(document).on("click",".toggle-list-btn.open-list",function(){var t=$(".lists-container"),e=$(".toggle-list-btn.open-list"),n=$(".toggle-list-btn.close-list");n.removeClass("hidden"),e.addClass("hidden"),t.slideToggle("fast")})}},RB.init=function(){RB.fixPath(),RB.all(),RB.e.init()},RB.App=Backbone.View.extend({el:".dmc",listnameItem:_.template($("#list-name-template").html()),initialize:function(){this.render()},events:{"click .lists-container .list-item":"renderList"},render:function(){var t=RB.getLists(this.collection);RB.setLists(this.collection,t,this.listnameItem)},renderList:function(t){var e=$(t.currentTarget).data("id"),n=this.collection.where({list:e}),i=RB.getNotes(n);RB.setNotes(".active-notes-container",i)}}),RB.Input=Backbone.View.extend({el:".active-list-container",inputTemplate:_.template($("#input-template").html()),initialize:function(){this.render()},render:function(){return $(".active-list-container").html(this.inputTemplate()),this}}),RB.NoteItem=Backbone.View.extend({className:"list-item",itemTemplate:_.template($("#note-item-template").html()),initalize:function(){this.render()},events:{"click .fa-trash":"clear","click .fa-check":"done"},render:function(){return this.$el.html(this.itemTemplate(this.model.toJSON())),this}}),RB.init();