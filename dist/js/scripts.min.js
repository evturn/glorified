function colorGenerator(){var e=["red","blue","green","yellow","purple","grey","black","orange","brown"],t=e[Math.floor(Math.random()*e.length)];return t}function createNote(){var e=$(".new-note-input").val(),t=$(".new-category-input").val();$(".kurt-loader").html('<img src="img/dog.gif">'),$.ajax({url:"/notes",type:"POST",dataType:"json",data:{body:e,list:t},success:function(e){$(".new-note-input").val(""),$(".new-category-input").val(""),console.log(e);var t=new Note(e),n=new NoteItem({model:t});n.render(),$(".active-notes").append(n),$(".kurt-loader").fadeOut("fast",function(){$(".kurt-loader").empty()})},error:function(e){$(".kurt-loader").empty(),$(".kurt-loader").append("<p>We got ",error)}})}var ListName=Backbone.Model.extend({}),Note=Backbone.Model.extend({}),User=Backbone.Model.extend({}),Notes=Backbone.Collection.extend({url:"/notes",model:Note,initialize:function(){this.fetch({success:function(e){console.log("fetch ",e);new ActiveList({collection:e}),new MenuLists({collection:e});return e},error:function(e){$(".active-notes").prepend('<p class="lead">'+e+"</p>")}})},lists:function(e){for(var t=e||this,n=[],o=0;o<t.models.length;o++){var i=t.models[o].attributes.list;-1===n.indexOf(i)&&n.push(i)}return n},firstList:function(){var e=this.lists();console.log(e[0])},newestList:function(){var e=this.lists();console.log(e[length-1])}}),notes=new Notes,ActiveList=Backbone.View.extend({el:".active-list-container",initialize:function(){this.render()},render:function(){this.collection.each(function(e){var t=new NoteItem({model:e});t.render(),$(".active-notes").append(t)})}}),NoteItem=Backbone.View.extend({className:".list-item",itemTemplate:_.template($("#list-active-item").html()),initalize:function(){this.render()},render:function(){return console.log(this.model),$(".active-notes").append(this.itemTemplate(this.model.toJSON())),this}}),MenuItem=Backbone.View.extend({className:".list-item",itemTemplate:_.template($("#list-name-item").html()),initalize:function(){this.render()},render:function(){return $(".list-names-container").append(this.itemTemplate(this.model.toJSON())),this}}),MenuLists=Backbone.View.extend({el:".list-container",initalize:function(){this.render()},render:function(){for(var e=this.collection.lists(),t=0;t<e.length;t++){console.log(e[t]);var n=new ListName({name:e[t]}),o=new MenuItem({model:n});o.render(),$(".list-names-container").append(o)}}});$(".landing-header").on("click",function(){$(".landing-header a").css("color",colorGenerator())}),$(function(){$(document).on("click",".new-note-btn",function(e){e.preventDefault(),createNote()})});